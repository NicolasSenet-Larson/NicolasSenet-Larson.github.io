@charset "utf-8"

// Fonts

@font-face
    font-family: 'Knights Quest Shielded'
    src: url(Knights-Quest-Shielded.ttf)

// Variables

$content-width: 1200px !default
$on-palm: 660px !default
$page-logo-width: 360px
$header-logo-width: 36px
$post-logo-width: 120px
$spacing: 20px
$border-radius: 4px

$base-font-family: Cantarell, "Helvetica Neue", Helvetica, Arial, sans-serif !default
$base-color: #3D3D3D
$link-color: #3870C6
$background-color: #F8F8F8
$shadow: rgba(0,0,0,0.2)

$site-background: url(noise-texture.png) center
$site-background-color: #272822
$site-background-size: auto

// Mixins

@mixin media-query($device)
    @media screen and (max-width: $device)
        @content

@mixin box-shadow($height)
    box-shadow: 0 0 0 1px $shadow, inset 0 -#{$height} $shadow

@mixin active-box-shadow($height)
    box-shadow: inset 0 0 0 1px $shadow, inset 0 #{$height} $shadow

// Animations

@keyframes display
    from
        opacity: 0
    to
        opacity: 1

// Common elements

a
    display: inline-block
    text-decoration: none
    color: $link-color
    border-radius: 2px
    padding: 2px 6px
    +active-box-shadow(0)

a:hover, a:active, a:focus
    outline: none
    background-color: $shadow
    +active-box-shadow(2px)

// Background

html
    font-family: $base-font-family
    height: 100%
    text-align: center
    color: $base-color
    background: $site-background
    background-color: $site-background-color
    background-size: $site-background-size
    padding: 0 $spacing/2

body
    width: 100%
    max-width: $content-width
    min-height: 100%
    margin: auto
    position: relative

    // Site header

    .site-header
        position: fixed
        top: 0
        left: $spacing/2 - $border-radius
        right: $spacing/2 - $border-radius
        z-index: 10
        max-width: $content-width
        margin: auto
        padding: $border-radius
        padding-bottom: $border-radius*2
        background-color: $site-background-color
        +box-shadow($border-radius)
        border-bottom-left-radius: $border-radius
        border-bottom-right-radius: $border-radius

        .site-nav
            .nav-trigger
                display: none

            label[for="nav-trigger"]
                display: none
                cursor: pointer
                border-radius: $border-radius

            .menu-icon
                display: inline-block
                width: 15px
                height: 18px
                padding-top: $spacing/2 + $border-radius/2
                padding-bottom: $spacing/2 - $border-radius/2

                svg path
                    fill: $background-color

            input ~ .trigger
                clear: both
                display: block

            input:checked ~ .trigger
                display: block

            .page-links
                float: left
                text-align: left
                width: 50%

            .socials
                float: right
                text-align: right
                width: 50%

            .page-link, .social
                display: inline-block
                vertical-align: middle
                min-width: $header-logo-width
                height: $header-logo-width
                line-height: $header-logo-width
                padding: $spacing/2
                color: $background-color
                border-radius: $border-radius
                background-color: $site-background-color

            .page-link
                min-width: $header-logo-width*2 + $border-radius + $spacing
                text-align: center
                font-weight: bold

            #current-page-link
                background-color: $shadow
                +active-box-shadow($border-radius)
                background-color: scale-color($site-background-color, $lightness: -20%)

            .page-link:hover, .page-link:active, .page-link:focus,
            .social:hover, .social:active, .social:focus,
            label:hover, label:active, label:focus
                background-color: $shadow
                text-decoration: none
                +active-box-shadow($border-radius)
                background-color: scale-color($site-background-color, $lightness: -20%)

    +media-query($on-palm)
        .site-header
            .site-nav
                label[for="nav-trigger"]
                    display: block

                input ~ .trigger
                    clear: both
                    display: none

                input:checked ~ .trigger
                    display: block

                .page-links, .socials
                    float: none
                    width: 100%
                    text-align: inherit
                    padding-top: $border-radius

    // Site footer

    .site-footer
        position: absolute
        bottom: 0
        left: 0
        right: 0
        padding: $spacing/2
        height: $header-logo-width + $spacing
        font-weight: bold
        color: $background-color
        text-shadow: 0 0 1em rgba($shadow, 1)

        a
            background-color: $site-background-color
            text-shadow: none

        a:hover, a:active, a:focus
            background-color: scale-color($site-background-color, $lightness: -20%)

    // Page

    .page
        padding-top: $header-logo-width + $spacing*2 + $border-radius*3
        padding-bottom: $header-logo-width + $spacing*2

        // Page header

        .page-header
            font-weight: bold
            color: $background-color
            text-shadow: 0 0 1em rgba($shadow, 1)

            .page-title
                font-size: 2em
                margin: $spacing 0

            time, .page-category
                display: inline-block
                vertical-align: middle
                margin: 0 $spacing/2

            .page-logo
                margin: $spacing*2 auto
                width: 100%
                max-width: $page-logo-width
                height: $page-logo-width
                line-height: $page-logo-width
                overflow: hidden
                border-radius: 50%
                background-color: $shadow

                img
                    width: 100%
                    min-height: 100%

            +media-query($on-palm)
                .page-logo
                    max-width: $page-logo-width*2/3
                    max-height: $page-logo-width*2/3
                    line-height: $page-logo-width*2/3

        // Page content

        .page-content
            text-align: left
            margin: $spacing*2 0
            padding: $spacing
            +box-shadow($border-radius)
            background-color: $background-color
            border-radius: $border-radius
            animation: display 0.5s linear

            h1, h2
                border-bottom: 1px solid $shadow
                padding-bottom: $spacing/2

            img
                border-radius: $border-radius
                max-width: 100%
                display: block
                margin: auto

            // Syntax highlighting styles for code snippets
            @import "_syntax-highlighting"

    // Home page

    #home
        .page-header
            background: url(monitor-frame.svg) calc(50% - #{$page-logo-width/2}) 100% no-repeat, url(g4quicksilver-frame.svg) calc(50% + #{$page-logo-width/2}) 100% no-repeat
            background-size: $page-logo-width

            .page-title
                font-family: 'Knights Quest Shielded', $base-font-family
                font-weight: normal
                font-size: 3em

            .page-category
                font-size: 1.5em

        +media-query($on-palm)
            .page-header
                background: url(monitor-frame.svg) calc(50% - #{$page-logo-width/3}) 100% no-repeat, url(g4quicksilver-frame.svg) calc(50% + #{$page-logo-width/3}) 100% no-repeat
                background-size: $page-logo-width/3*2

                .page-title
                    font-size: 7vw

                .page-category
                    font-size: 1em

        +media-query($page-logo-width/3*4)
            .page-header
                background: none

        .post
            display: block
            margin: $spacing auto
            padding: $spacing
            padding-bottom: $spacing/2
            color: $background-color
            font-weight: bold
            background-color: $site-background-color
            border-radius: $border-radius
            +active-box-shadow(0)
            animation: display 0.5s linear

            .post-logo
                display: inline-block
                width: $post-logo-width
                height: $post-logo-width
                line-height: $post-logo-width
                margin-top: $spacing/2
                border-radius: 50%
                overflow: hidden
                background-color: $shadow

                img
                    width: 100%
                    min-height: 100%

            .post-title
                font-size: 1.5em

            time
                display: inline-block
                vertical-align: middle
                margin: 0 $spacing/2

            .post-category
                display: inline-block
                vertical-align: middle
                margin: 0 $spacing/2

        .post:hover, .post:active, .post:focus
            +active-box-shadow($border-radius)
            background-color: scale-color($site-background-color, $lightness: -20%)
